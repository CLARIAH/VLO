<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd">

<!--    Mapping of facets to XPATH expressions. The facets should correspond to the facets described in the-->
<!--    solr/conf/schema.xml file of the SOLR Server installation-->

  <bean id="imdiMapping" class="eu.clarin.cmdi.vlo.importer.FacetMapping">  <!-- add year? -->
    <property name="idMapping" value="/CMD/Header/MdSelfLink/text()" />
    <property name="facets">
      <list>
        <bean class="eu.clarin.cmdi.vlo.importer.FacetConfiguration">
          <property name="name" value="name" />
          <property name="pattern" value="/CMD/Components/Session/Name/text()" />
        </bean>
        <bean class="eu.clarin.cmdi.vlo.importer.FacetConfiguration">
          <property name="name" value="year" />
          <property name="pattern" value="/CMD/Components/Session/Date/text()" />
        </bean>
        <bean class="eu.clarin.cmdi.vlo.importer.FacetConfiguration">
          <property name="name" value="continent" />
          <property name="pattern" value="/CMD/Components/Session/MDGroup/Location/Continent/text()" />
        </bean>
        <bean class="eu.clarin.cmdi.vlo.importer.FacetConfiguration">
          <property name="name" value="country" />
          <property name="pattern" value="/CMD/Components/Session/MDGroup/Location/Country/text()" />
        </bean>
        <bean class="eu.clarin.cmdi.vlo.importer.FacetConfiguration">
          <property name="name" value="language" />
          <property name="pattern" value="/CMD/Components/Session/MDGroup/Content/Content_Languages/Content_Language/Id/text()" />
        </bean>
        <bean class="eu.clarin.cmdi.vlo.importer.FacetConfiguration">
          <property name="name" value="organisation" />
          <property name="pattern" value="/CMD/Components/Session/MDGroup/Project/Contact/Organisation/text()" />
        </bean>
        <bean class="eu.clarin.cmdi.vlo.importer.FacetConfiguration">
          <property name="name" value="genre" />
          <property name="pattern" value="/CMD/Components/Session/MDGroup/Content/Genre/text()" />
          <property name="caseInsensitive" value="true" />
        </bean>
        <bean class="eu.clarin.cmdi.vlo.importer.FacetConfiguration">
          <property name="name" value="subject" />
          <property name="pattern" value="/CMD/Components/Session/MDGroup/Content/Subject/text()" />
          <property name="caseInsensitive" value="true" />
        </bean>
        <bean class="eu.clarin.cmdi.vlo.importer.FacetConfiguration">
          <property name="name" value="description" />
          <property name="pattern" value="/CMD/Components/Session/descriptions/Description/text()" />
        </bean>
      </list>
    </property>
  </bean>
  
    <!--
    /CMD/Components/OLAC-DcmiTerms/identifier (if starting with http://) -> open in original context (now: IMDI browser)
  -->
  <bean id="olacMapping" class="eu.clarin.cmdi.vlo.importer.FacetMapping">
    <property name="idMapping" value="/CMD/Header/MdSelfLink/text()" /> <!-- And some other example see http://trac.clarin.eu/wiki/CmdiVirtualLanguageObservatory -->
    <property name="facets">
      <list>
        <bean class="eu.clarin.cmdi.vlo.importer.FacetConfiguration">
          <property name="name" value="name" />
          <property name="pattern" value="/CMD/Components/OLAC-DcmiTerms/title/text()" />
        </bean>
        <bean class="eu.clarin.cmdi.vlo.importer.FacetConfiguration">
          <property name="name" value="country" />
          <property name="patterns">
            <list>
                <value>/CMD/Components/OLAC-DcmiTerms/spatial[@dcterms-type="ISO3166"]/text()</value>
                <value>/CMD/Components/OLAC-DcmiTerms/coverage[@dcterms-type="ISO3166"]/text()</value>
            </list>
          </property>
        </bean>
        <bean class="eu.clarin.cmdi.vlo.importer.FacetConfiguration">
          <property name="name" value="language" />
          <property name="patterns">
            <list>
                <value>/CMD/Components/OLAC-DcmiTerms/language/@olac-language</value>
                <value>/CMD/Components/OLAC-DcmiTerms/subject/@olac-language</value>
            </list>
          </property>
        </bean>
        <bean class="eu.clarin.cmdi.vlo.importer.FacetConfiguration">
          <property name="name" value="organisation" />
          <property name="pattern" value="/CMD/Components/OLAC-DcmiTerms/publisher/text()" />
        </bean>
        <bean class="eu.clarin.cmdi.vlo.importer.FacetConfiguration">
          <property name="name" value="genre" />
          <property name="pattern" value="/CMD/Components/OLAC-DcmiTerms/type/@olac-linguistic-type" />
          <property name="caseInsensitive" value="true" />
        </bean>
        <bean class="eu.clarin.cmdi.vlo.importer.FacetConfiguration">
          <property name="name" value="description" />
          <property name="pattern" value="/CMD/Components/OLAC-DcmiTerms/description/text()" />
        </bean>
        <bean class="eu.clarin.cmdi.vlo.importer.FacetConfiguration">
          <property name="name" value="subject" />
          <property name="patterns">
            <list>
                <value>/CMD/Components/OLAC-DcmiTerms/subject/@olac-linguistic-field</value>
                <value>/CMD/Components/OLAC-DcmiTerms/subject[@dcterms-type="LCSH"]/text()</value>
            </list>
          </property>
          <property name="caseInsensitive" value="true" />
        </bean>
      </list>
    </property>
  </bean>





  <!--
    /CMD/Components/LrtInventoryResource/LrtCommon/MetadataLink (if not existing: ReferenceLink?) -> open in original
    context
  -->
  <!--/CMD/Components/LrtInventoryResource/LrtCommon/ResourceType -> resource type-->
  <!--
    /CMD/Components/LrtInventoryResource/LrtCommon/Format-> format Resource type and format need to talk to Dieter what
    will the implications be? Also need to think about a way to get language and country codes, human readable?
  -->

  <bean id="lrtMapping" class="eu.clarin.cmdi.vlo.importer.FacetMapping">
    <property name="idMapping" value="/CMD/Header/MdSelfLink/text()" />
    <property name="facets">
      <list>
        <bean class="eu.clarin.cmdi.vlo.importer.FacetConfiguration">
          <property name="name" value="name" />
          <property name="pattern" value="/CMD/Components/LrtInventoryResource/LrtCommon/ResourceName/text()" />
        </bean>
        <bean class="eu.clarin.cmdi.vlo.importer.FacetConfiguration">
          <property name="name" value="resourceType" />
          <property name="pattern" value="/CMD/Components/LrtInventoryResource/LrtCommon/ResourceType/text()" />
        </bean>
        <bean class="eu.clarin.cmdi.vlo.importer.FacetConfiguration">
          <property name="name" value="country" />
          <property name="pattern" value="/CMD/Components/LrtInventoryResource/LrtCommon/Countries/Country/Code/text()" />
        </bean>
        <bean class="eu.clarin.cmdi.vlo.importer.FacetConfiguration">
          <property name="name" value="language" />
          <property name="pattern" value="/CMD/Components/LrtInventoryResource/LrtCommon/Languages/ISO639/iso-639-3-code/text()" />
        </bean>
        <bean class="eu.clarin.cmdi.vlo.importer.FacetConfiguration">
          <property name="name" value="organisation" />
          <property name="pattern" value="/CMD/Components/LrtInventoryResource/LrtCommon/Institute/text()" />
        </bean>
        <bean class="eu.clarin.cmdi.vlo.importer.FacetConfiguration">
          <property name="name" value="year" />
          <property name="pattern"
            value="/CMD/Components/LrtInventoryResource/LrtCommon/FinalizationYearResourceCreation/text()" />
        </bean>
        <bean class="eu.clarin.cmdi.vlo.importer.FacetConfiguration">
          <property name="name" value="description" />
          <property name="pattern" value="/CMD/Components/LrtInventoryResource/LrtCommon/Description/text()" />
        </bean>
        <!--        <entry key="continent">-->
        <!--          <value></value>-->
        <!--        </entry>-->
        <!--        <entry key="genre">-->
        <!--          <value></value>-->
        <!--        </entry>-->
        <!--        <entry key="subject">-->
        <!--          <value></value>-->
        <!--        </entry>-->
      </list>
    </property>
  </bean>


</beans>
